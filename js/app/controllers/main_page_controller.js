// Generated by CoffeeScript 1.10.0
(function() {
  var app;

  app = angular.module('myApp');

  app.factory('sendRating', function($http) {
    return function(rating) {
      return $http.post('localhost:3000/rate', rating);
    };
  });

  app.controller('mainCtrl', [
    '$scope', '$routeParams', 'UserDataService', 'getUser', 'getPosts', 'sendRating', 'getHighRate', function($scope, $routeParams, UserDataService, getUser, getPosts, sendRating, getHighRate) {
      $scope.destinations = {
        'user': getPosts(UserDataService.user),
        'all': getHighRate
      };
      $scope.posts = [];
      $scope.action = function() {
        $scope.destinations[$routeParams.destination].get().then(function(posts) {
          console.log(posts.data);
          $scope.posts = posts.data;
        }, function(err) {
          console.log(err.data);
        });
      };
      $scope.rate = function(post) {
        var rating;
        rating = {
          id: post.id,
          score: post.score
        };
        console.log(rating);
        sendRating(rating).success(function(meanRating) {
          console.log(meanRating);
        });
      };
    }
  ]);

}).call(this);

//# sourceMappingURL=main_page_controller.js.map
